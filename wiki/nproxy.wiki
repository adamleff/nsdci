#summary Networked Proxy API
#labels Phase-Implementation

=Networked Proxy (nproxy)=
nsdci/dcicommon/nproxy.c

==Introduction==
The Networked Proxy API (nproxy) is used to send scripts or commands to remote servers for execution.  The result is sent back to the client. 

Additional Reading: [rpc]

==TCL API==

===nproxy.send===
Used to send scripts or commands to a named nproxy.  See the "Configuration" section for more information.

*nproxy.send* _server script ?timeout?_

|| *Argument* || *Description* ||
|| _server_ || String. A named nproxy server. See the "Configuration" section for more information. ||
|| _script_ || String, The script or command to send. ||
|| _?timeout?_ || Integer. Optional. How long to wait for the result. ||


|| *Result* || Description ||
|| {{{String}}} || Success. The result of script or command. ||
|| {{{TCL_ERROR}}} || Failure. An error occurred. See the server log for more information. ||

{{{
--------------------------------------------------------------------------------
}}}

===nproxy.debug===

==Configuration==
====Server:====
{{{
    ns_section "ns/server/$server/modules"
        ns_param nssock nssock.so
        ns_param dci dci.so

    ns_section "ns/server/$server/module/nssock"
        ns_param hostname $hostName
        ns_param address $address
        ns_param port $httpPort

    ns_section "ns/server/$server/module/dci/rpc/server/nproxy"
        ns_param http 1

    ns_section "ns/server/$server/module/dci/nproxy"
        ns_param debug 1

    ns_section "ns/server/$server/module/dci/nproxy/servers"
        ns_param $nproxyServerName $nproxyServerName

    ns_section "ns/server/$server/module/dci/nproxy/server/$nproxyServerName"
        ns_param handshakeName $nproxyServerName

    ns_section "ns/server/$server/module/dci/nproxy/server/$nproxyServerName/clients"
        # This section has no params but is required
}}}
====Client:====
{{{
    ns_section "ns/server/$server/module/dci/rpc/client/nproxy:${$nproxyServerName}"
        ns_param address $nproxyServerAddress
        ns_param port $nproxyServerPort
        ns_param httpkeepalive true
        ns_param httpnumconnections 1

    ns_section "ns/server/$server/module/dci/nproxy"
        ns_param debug 1

    ns_section "ns/server/$server/module/dci/nproxy/clients"
        ns_param $nproxyServerName $nproxyServerName

    ns_section "ns/server/$server/module/dci/nproxy/client/$nproxyServerName"
        ns_param timeout 1
}}}

==Usage==

==Best Practices==
